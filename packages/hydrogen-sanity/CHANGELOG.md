<!-- markdownlint-disable --><!-- textlint-disable -->

# ðŸ““ Changelog

All notable changes to this project will be documented in this file. See
[Conventional Commits](https://conventionalcommits.org) for commit guidelines.

## <small>5.0.1 (2025-09-18)</small>

- fix: set provider value on both server and client ([773bea5](https://github.com/sanity-io/hydrogen-sanity/commit/773bea5))

## 5.0.0 (2025-09-18)

- chore: add preview origin ([5805076](https://github.com/sanity-io/hydrogen-sanity/commit/5805076))
- chore: add studio deployment ([f0b39fd](https://github.com/sanity-io/hydrogen-sanity/commit/f0b39fd))
- chore: add studio example and storefront deployment workflow ([80f2d11](https://github.com/sanity-io/hydrogen-sanity/commit/80f2d11))
- chore: adjust example environment variables ([a1f2f51](https://github.com/sanity-io/hydrogen-sanity/commit/a1f2f51))
- chore: adjust github workflow ([42ed535](https://github.com/sanity-io/hydrogen-sanity/commit/42ed535))
- chore: adjust release workflow ([a34ad3b](https://github.com/sanity-io/hydrogen-sanity/commit/a34ad3b))
- chore: adjust root workspace scripts ([f8fac68](https://github.com/sanity-io/hydrogen-sanity/commit/f8fac68))
- chore: adjust turbo ([8d6ec01](https://github.com/sanity-io/hydrogen-sanity/commit/8d6ec01))
- chore: adjust turbo configuration ([29649fa](https://github.com/sanity-io/hydrogen-sanity/commit/29649fa))
- chore: adjust workflows ([3483c6a](https://github.com/sanity-io/hydrogen-sanity/commit/3483c6a))
- chore: fix semantic release configuration ([e20755d](https://github.com/sanity-io/hydrogen-sanity/commit/e20755d))
- chore: organize file and examples ([af8a714](https://github.com/sanity-io/hydrogen-sanity/commit/af8a714))
- chore: remove old examples and scaffold a new react-router storefront ([4d4a8e5](https://github.com/sanity-io/hydrogen-sanity/commit/4d4a8e5))
- chore: update branch references after renaming main->v4 and next->main (#143) ([d44499a](https://github.com/sanity-io/hydrogen-sanity/commit/d44499a)), closes [#143](https://github.com/sanity-io/hydrogen-sanity/issues/143)
- chore: update examples ([022588c](https://github.com/sanity-io/hydrogen-sanity/commit/022588c))
- chore: update todos ([83499af](https://github.com/sanity-io/hydrogen-sanity/commit/83499af))
- chore: upgrade dependencies ([85cbab6](https://github.com/sanity-io/hydrogen-sanity/commit/85cbab6))
- chore: use JS `semantic-release` configuration ([82cd6dc](https://github.com/sanity-io/hydrogen-sanity/commit/82cd6dc))
- chore(ci): upgrade `actions/setup-node` ([2d6a690](https://github.com/sanity-io/hydrogen-sanity/commit/2d6a690))
- chore(deps): use latest sanity version ([d50e33e](https://github.com/sanity-io/hydrogen-sanity/commit/d50e33e))
- chore(release): 5.0.0-next.1 [skip ci] ([b96c826](https://github.com/sanity-io/hydrogen-sanity/commit/b96c826))
- chore(release): 5.0.0-next.2 [skip ci] ([16fc39a](https://github.com/sanity-io/hydrogen-sanity/commit/16fc39a))
- chore(release): 5.0.0-next.3 [skip ci] ([31fd9c8](https://github.com/sanity-io/hydrogen-sanity/commit/31fd9c8))
- chore(release): 5.0.0-next.4 [skip ci] ([96496f7](https://github.com/sanity-io/hydrogen-sanity/commit/96496f7))
- chore(studio): disable auto updates ([92e948b](https://github.com/sanity-io/hydrogen-sanity/commit/92e948b))
- feat!: add a `fetch` method ([1eefda2](https://github.com/sanity-io/hydrogen-sanity/commit/1eefda2))
- feat!: drop `groq` and `client` exports ([1117647](https://github.com/sanity-io/hydrogen-sanity/commit/1117647))
- feat!: enhance support for client-side loaders and visual editing ([e07928b](https://github.com/sanity-io/hydrogen-sanity/commit/e07928b))
- feat!: refactor session handling ([8f71fb5](https://github.com/sanity-io/hydrogen-sanity/commit/8f71fb5))
- feat!: remove commonjs exports ([1d15fa6](https://github.com/sanity-io/hydrogen-sanity/commit/1d15fa6))
- feat!: remove deprecated code ([8650e11](https://github.com/sanity-io/hydrogen-sanity/commit/8650e11))
- feat!: remove groq export ([8a90536](https://github.com/sanity-io/hydrogen-sanity/commit/8a90536))
- feat!: update dependencies and add vite plugin ([66bd3d5](https://github.com/sanity-io/hydrogen-sanity/commit/66bd3d5))
- fix!: normlize preview client naming ([eba2a60](https://github.com/sanity-io/hydrogen-sanity/commit/eba2a60))
- Merge branch 'next' ([f1052b3](https://github.com/sanity-io/hydrogen-sanity/commit/f1052b3))
- feat: add `EncodeDataAttributeFunction` export and review `Overlays` ([7171e85](https://github.com/sanity-io/hydrogen-sanity/commit/7171e85))
- feat: add `groq` export ([95a3537](https://github.com/sanity-io/hydrogen-sanity/commit/95a3537))
- feat: add automatic loader detection for `VisualEditing` ([1c68a36](https://github.com/sanity-io/hydrogen-sanity/commit/1c68a36))
- feat: add environment variable prefix `SANITY_STUDIO_` ([bef4c48](https://github.com/sanity-io/hydrogen-sanity/commit/bef4c48))
- feat: add image URL hooks ([d7033ae](https://github.com/sanity-io/hydrogen-sanity/commit/d7033ae))
- feat: add missing react loader exports ([e1ade77](https://github.com/sanity-io/hydrogen-sanity/commit/e1ade77))
- feat: add preview mode hook ([bda8479](https://github.com/sanity-io/hydrogen-sanity/commit/bda8479))
- feat: add Sanity provider ([742b9e0](https://github.com/sanity-io/hydrogen-sanity/commit/742b9e0))
- feat: Add TypeGen compatibility for `loadQuery` ([2ffbb39](https://github.com/sanity-io/hydrogen-sanity/commit/2ffbb39))
- feat: add wrappers for server fetching and client-side loading ([6439320](https://github.com/sanity-io/hydrogen-sanity/commit/6439320))
- feat: adjust dependencies ([554f4f3](https://github.com/sanity-io/hydrogen-sanity/commit/554f4f3))
- feat: compile with React Compiler ([cb9ce42](https://github.com/sanity-io/hydrogen-sanity/commit/cb9ce42))
- feat: export image builder types ([2c6433f](https://github.com/sanity-io/hydrogen-sanity/commit/2c6433f))
- feat: move `usePreviewMode` to `/preview` ([290b70d](https://github.com/sanity-io/hydrogen-sanity/commit/290b70d))
- feat: use session handling for preview mode ([4abb244](https://github.com/sanity-io/hydrogen-sanity/commit/4abb244))
- fix: add fallback back ([52d8d55](https://github.com/sanity-io/hydrogen-sanity/commit/52d8d55))
- fix: adjust warning ([3c1ed71](https://github.com/sanity-io/hydrogen-sanity/commit/3c1ed71))
- fix: force ESM resolution for `rxjs` and add `@sanity/image-url-builder` to optimized dependencies ([005cc61](https://github.com/sanity-io/hydrogen-sanity/commit/005cc61))
- fix: lazy load query store ([f48bcf5](https://github.com/sanity-io/hydrogen-sanity/commit/f48bcf5))
- fix: only warn about missing action once ([8155ca3](https://github.com/sanity-io/hydrogen-sanity/commit/8155ca3))
- fix: remove `handlePerspectiveChange` from `useEffect` dependencies ([54a052e](https://github.com/sanity-io/hydrogen-sanity/commit/54a052e))
- fix: use `@sanity/visual-editing`'s React Router build ([9b8b40a](https://github.com/sanity-io/hydrogen-sanity/commit/9b8b40a))
- docs: add image hook to README ([d204a1e](https://github.com/sanity-io/hydrogen-sanity/commit/d204a1e))
- docs: add instructions for installing vite plugin ([8f04e77](https://github.com/sanity-io/hydrogen-sanity/commit/8f04e77))
- docs: add TypeGen section ([3d3ebe6](https://github.com/sanity-io/hydrogen-sanity/commit/3d3ebe6))
- docs: adjust migration guide messaging on ESM-only exports ([2a8ca49](https://github.com/sanity-io/hydrogen-sanity/commit/2a8ca49))
- docs: adjust README ([814d89c](https://github.com/sanity-io/hydrogen-sanity/commit/814d89c))
- docs: improve README and migration guide ([2cd44af](https://github.com/sanity-io/hydrogen-sanity/commit/2cd44af))
- docs: update migration documentation ([4a58090](https://github.com/sanity-io/hydrogen-sanity/commit/4a58090))
- docs: update migration guide ([119a0d9](https://github.com/sanity-io/hydrogen-sanity/commit/119a0d9))
- docs: update readme and migration guide ([ad83e04](https://github.com/sanity-io/hydrogen-sanity/commit/ad83e04))
- refactor: add `isServer` utility ([a9a702b](https://github.com/sanity-io/hydrogen-sanity/commit/a9a702b))
- refactor: adjust hook exports ([464ff6b](https://github.com/sanity-io/hydrogen-sanity/commit/464ff6b))
- test: fix tests ([96878b1](https://github.com/sanity-io/hydrogen-sanity/commit/96878b1))

### BREAKING CHANGE

- `createSanityContext` now returns a Promise.
- `createSanityLoader` has been removed.
- `hydrogen-sanity` depends on React Router 7. You can
  find more information in [Shopify's
  changelog](https://hydrogen.shopify.dev/update/may-2025).
- `hydrogen-sanity` is now ESM-only. CommonJS (CJS) exports have been removed.
- `hydrogen-sanity` no longer re-exports `@sanity/client` and `groq`. Both are now true peer dependencies and you are expected to install them as direct dependencies of your storefront.
- `hydrogen-sanity` no longer re-exports `groq`.
- rename `preview.previewClient` to `preview.client`
- Sanity context no longer returns a `previewClient`. Instead, the client that is passed to `createSanityContext` is configured automatically.

## 5.0.0-next.4 (2025-09-10)

- feat: add wrappers for server fetching and client-side loading ([6439320](https://github.com/sanity-io/hydrogen-sanity/commit/6439320))
- fix: force ESM resolution for `rxjs` and add `@sanity/image-url-builder` to optimized dependencies ([005cc61](https://github.com/sanity-io/hydrogen-sanity/commit/005cc61))
- fix: lazy load query store ([f48bcf5](https://github.com/sanity-io/hydrogen-sanity/commit/f48bcf5))
- feat!: add a `fetch` method ([1eefda2](https://github.com/sanity-io/hydrogen-sanity/commit/1eefda2))

### BREAKING CHANGE

- `createSanityContext` now returns a Promise.

## 5.0.0-next.3 (2025-09-08)

- feat!: enhance support for client-side loaders and visual editing ([e07928b](https://github.com/sanity-io/hydrogen-sanity/commit/e07928b))
- docs: adjust README ([814d89c](https://github.com/sanity-io/hydrogen-sanity/commit/814d89c))

### BREAKING CHANGE

- Sanity context no longer returns a `previewClient`. Instead, the client that is passed to `createSanityContext` is configured automatically.

## 5.0.0-next.2 (2025-08-29)

- docs: add image hook to README ([d204a1e](https://github.com/sanity-io/hydrogen-sanity/commit/d204a1e))
- docs: add instructions for installing vite plugin ([8f04e77](https://github.com/sanity-io/hydrogen-sanity/commit/8f04e77))
- docs: update migration documentation ([4a58090](https://github.com/sanity-io/hydrogen-sanity/commit/4a58090))
- docs: update migration guide ([119a0d9](https://github.com/sanity-io/hydrogen-sanity/commit/119a0d9))
- feat: add `groq` export ([95a3537](https://github.com/sanity-io/hydrogen-sanity/commit/95a3537))
- feat: add image URL hooks ([d7033ae](https://github.com/sanity-io/hydrogen-sanity/commit/d7033ae))
- feat: add preview mode hook ([bda8479](https://github.com/sanity-io/hydrogen-sanity/commit/bda8479))
- feat: add Sanity provider ([742b9e0](https://github.com/sanity-io/hydrogen-sanity/commit/742b9e0))
- feat: Add TypeGen compatibility for `loadQuery` ([2ffbb39](https://github.com/sanity-io/hydrogen-sanity/commit/2ffbb39))
- feat: move `usePreviewMode` to `/preview` ([290b70d](https://github.com/sanity-io/hydrogen-sanity/commit/290b70d))
- feat: use session handling for preview mode ([4abb244](https://github.com/sanity-io/hydrogen-sanity/commit/4abb244))
- fix: add fallback back ([52d8d55](https://github.com/sanity-io/hydrogen-sanity/commit/52d8d55))
- fix: adjust warning ([3c1ed71](https://github.com/sanity-io/hydrogen-sanity/commit/3c1ed71))
- fix: only warn about missing action once ([8155ca3](https://github.com/sanity-io/hydrogen-sanity/commit/8155ca3))
- fix: use `@sanity/visual-editing`'s React Router build ([9b8b40a](https://github.com/sanity-io/hydrogen-sanity/commit/9b8b40a))
- refactor: add `isServer` utility ([a9a702b](https://github.com/sanity-io/hydrogen-sanity/commit/a9a702b))
- refactor: adjust hook exports ([464ff6b](https://github.com/sanity-io/hydrogen-sanity/commit/464ff6b))
- feat!: drop `groq` and `client` exports ([1117647](https://github.com/sanity-io/hydrogen-sanity/commit/1117647))
- feat!: refactor session handling ([8f71fb5](https://github.com/sanity-io/hydrogen-sanity/commit/8f71fb5))
- fix!: normlize preview client naming ([eba2a60](https://github.com/sanity-io/hydrogen-sanity/commit/eba2a60))
- chore: add preview origin ([5805076](https://github.com/sanity-io/hydrogen-sanity/commit/5805076))
- chore: add studio deployment ([f0b39fd](https://github.com/sanity-io/hydrogen-sanity/commit/f0b39fd))
- chore: adjust example environment variables ([a1f2f51](https://github.com/sanity-io/hydrogen-sanity/commit/a1f2f51))
- chore: adjust root workspace scripts ([f8fac68](https://github.com/sanity-io/hydrogen-sanity/commit/f8fac68))
- chore: adjust turbo configuration ([29649fa](https://github.com/sanity-io/hydrogen-sanity/commit/29649fa))
- chore: adjust workflows ([3483c6a](https://github.com/sanity-io/hydrogen-sanity/commit/3483c6a))
- chore: update examples ([022588c](https://github.com/sanity-io/hydrogen-sanity/commit/022588c))
- chore: update todos ([83499af](https://github.com/sanity-io/hydrogen-sanity/commit/83499af))
- chore: upgrade dependencies ([85cbab6](https://github.com/sanity-io/hydrogen-sanity/commit/85cbab6))
- chore: use JS `semantic-release` configuration ([82cd6dc](https://github.com/sanity-io/hydrogen-sanity/commit/82cd6dc))
- chore(deps): use latest sanity version ([d50e33e](https://github.com/sanity-io/hydrogen-sanity/commit/d50e33e))
- chore(studio): disable auto updates ([92e948b](https://github.com/sanity-io/hydrogen-sanity/commit/92e948b))

### BREAKING CHANGE

- `hydrogen-sanity` no longer re-exports `@sanity/client` and `groq`. Both are now true peer dependencies and you are expected to install them as direct dependencies of your storefront.
- rename `preview.previewClient` to `preview.client`

## 5.0.0-next.1 (2025-05-26)

- chore: add `next` channel ([b6d75fb](https://github.com/sanity-io/hydrogen-sanity/commit/b6d75fb))
- chore: add studio example and storefront deployment workflow ([b86fd70](https://github.com/sanity-io/hydrogen-sanity/commit/b86fd70))
- chore: adjust github workflow ([a5ca90c](https://github.com/sanity-io/hydrogen-sanity/commit/a5ca90c))
- chore: adjust release workflow ([c41448a](https://github.com/sanity-io/hydrogen-sanity/commit/c41448a))
- chore: adjust turbo ([563757c](https://github.com/sanity-io/hydrogen-sanity/commit/563757c))
- chore: organize file and examples ([d550809](https://github.com/sanity-io/hydrogen-sanity/commit/d550809))
- chore: remove old examples and scaffold a new react-router storefront ([6aca4c5](https://github.com/sanity-io/hydrogen-sanity/commit/6aca4c5))
- docs: update readme and migration guide ([b35d14b](https://github.com/sanity-io/hydrogen-sanity/commit/b35d14b))
- feat: add environment variable prefix `SANITY_STUDIO_` ([44cd400](https://github.com/sanity-io/hydrogen-sanity/commit/44cd400))
- feat: adjust dependencies ([3354ee1](https://github.com/sanity-io/hydrogen-sanity/commit/3354ee1))
- feat: compile with React Compiler ([98cd784](https://github.com/sanity-io/hydrogen-sanity/commit/98cd784))
- feat!: remove commonjs exports ([2ca4e05](https://github.com/sanity-io/hydrogen-sanity/commit/2ca4e05))
- feat!: remove deprecated code ([c3d93b9](https://github.com/sanity-io/hydrogen-sanity/commit/c3d93b9))
- feat!: remove groq export ([b342a42](https://github.com/sanity-io/hydrogen-sanity/commit/b342a42))
- feat!: update dependencies and add vite plugin ([d0a5564](https://github.com/sanity-io/hydrogen-sanity/commit/d0a5564))
- test: fix tests ([c92a464](https://github.com/sanity-io/hydrogen-sanity/commit/c92a464))

### BREAKING CHANGE

- `createSanityLoader` has been removed.
- `hydrogen-sanity` depends on React Router 7. You can
  find more information in [Shopify's
  changelog](https://hydrogen.shopify.dev/update/may-2025).
- `hydrogen-sanity` is now ESM-only. CommonJS (CJS) exports have been removed.
- `hydrogen-sanity` no longer re-exports `groq`.

## [4.3.3](https://github.com/sanity-io/hydrogen-sanity/compare/v4.3.2...v4.3.3) (2025-02-06)

### Bug Fixes

- **deps:** upgrade Hydrogen peer dependency ([#114](https://github.com/sanity-io/hydrogen-sanity/issues/114)) ([17a6aa3](https://github.com/sanity-io/hydrogen-sanity/commit/17a6aa3a33fca5db97641a3cbc5c16a7870bc187))

## [4.3.2](https://github.com/sanity-io/hydrogen-sanity/compare/v4.3.1...v4.3.2) (2024-11-15)

### Bug Fixes

- **deps:** Update non-major ([#110](https://github.com/sanity-io/hydrogen-sanity/issues/110)) ([34ec369](https://github.com/sanity-io/hydrogen-sanity/commit/34ec36916f8e4412086a3170b1e9f4bbc364a547))

## [4.3.1](https://github.com/sanity-io/hydrogen-sanity/compare/v4.3.0...v4.3.1) (2024-11-05)

### Bug Fixes

- **deps:** Update non-major ([bd9bee3](https://github.com/sanity-io/hydrogen-sanity/commit/bd9bee3cb703c5395727547940394cc13a97f3b2))

## [4.3.0](https://github.com/sanity-io/hydrogen-sanity/compare/v4.2.1...v4.3.0) (2024-11-03)

### Features

- add `shouldCacheResult` option ([#96](https://github.com/sanity-io/hydrogen-sanity/issues/96)) ([4fa7337](https://github.com/sanity-io/hydrogen-sanity/commit/4fa73371b8ca64bd7f59936e7a0716b1ae0c9360))

## [4.2.1](https://github.com/sanity-io/hydrogen-sanity/compare/v4.2.0...v4.2.1) (2024-10-31)

### Bug Fixes

- **deps:** upgrade sanity deps to latest ([350122a](https://github.com/sanity-io/hydrogen-sanity/commit/350122af538bd3fff712c773fcb29b40bc9b16c1))

## [4.2.0](https://github.com/sanity-io/hydrogen-sanity/compare/v4.1.1...v4.2.0) (2024-10-19)

### Features

- deprecate 'loader' in favor of 'context' ([55de865](https://github.com/sanity-io/hydrogen-sanity/commit/55de865262b3d74e08b6a28628166dd456e03d8c))

### Bug Fixes

- add better error messages in preview route ([83e9a2e](https://github.com/sanity-io/hydrogen-sanity/commit/83e9a2e4f1eb12cfe84ece4a5661b14c45566c94))
- don't create query store ([8e6068a](https://github.com/sanity-io/hydrogen-sanity/commit/8e6068a2d4ecefa54abc710ca511f38ecdf376e1))

## [4.1.1](https://github.com/sanity-io/hydrogen-sanity/compare/v4.1.0...v4.1.1) (2024-10-19)

### Bug Fixes

- **deps:** upgrade non-major ([9f3c5fa](https://github.com/sanity-io/hydrogen-sanity/commit/9f3c5fa7969e7ba7132a01b715529f783fa964eb))
- use Hydrogen caching strategy type ([6e09811](https://github.com/sanity-io/hydrogen-sanity/commit/6e09811e6df3f3086a653a4a9caff332ebbeda18))

## [4.1.0](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.5...v4.1.0) (2024-08-03)

### Features

- pass `tag` and `headers` options to `loadQuery` ([f371c72](https://github.com/sanity-io/hydrogen-sanity/commit/f371c7293e92582f74eb1e84383ba2f032e952e3))

### Bug Fixes

- add missing stega options ([72d33dc](https://github.com/sanity-io/hydrogen-sanity/commit/72d33dcb425f1399ae45bd80fae2fd7655d9cdd6))
- **deps:** update non-major ([ba02af2](https://github.com/sanity-io/hydrogen-sanity/commit/ba02af2ab538817f8092c611cd73817f8d4fa1a5))
- **deps:** upgrade non-major ([f138ca7](https://github.com/sanity-io/hydrogen-sanity/commit/f138ca7278db05f7bf2060009c0e023f90ece68a))

## [4.0.5](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.4...v4.0.5) (2024-07-11)

### Bug Fixes

- **deps:** upgrade hydrogen ([405d3cb](https://github.com/sanity-io/hydrogen-sanity/commit/405d3cb2994e9990cef48917512a74109d1c756b))

## [4.0.4](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.3...v4.0.4) (2024-05-24)

### Bug Fixes

- add missing dependency ([df0a3db](https://github.com/sanity-io/hydrogen-sanity/commit/df0a3dbfa3979b175beb8013732fdcde4a38d610))

## [4.0.3](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.2...v4.0.3) (2024-05-20)

### Bug Fixes

- ensure `VisualEditing` isn't added to the server bundle ([ba3d3e6](https://github.com/sanity-io/hydrogen-sanity/commit/ba3d3e6608b3f32e9769883610e49d00caeed71f))

## [4.0.2](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.1...v4.0.2) (2024-05-08)

### Bug Fixes

- print debug info on failure ([350c85f](https://github.com/sanity-io/hydrogen-sanity/commit/350c85fb1ad255bd531e76951b44443b2c2279cd))
- upgrade dependencies ([38ba955](https://github.com/sanity-io/hydrogen-sanity/commit/38ba955e9af6b3f1b0d0f31cf19f180fb90ed06b))

## [4.0.1](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.0...v4.0.1) (2024-05-07)

### Bug Fixes

- remove beta tag from README ([2a8c947](https://github.com/sanity-io/hydrogen-sanity/commit/2a8c947444b9c7c7f180986f974acac7bd9b181e))

## [4.0.0](https://github.com/sanity-io/hydrogen-sanity/compare/v3.4.1...v4.0.0) (2024-05-07)

### âš  BREAKING CHANGES

- pass client to loader
- adjust preview mode
- import names and response shapes have changes

- chore: add migration details

- feat: rewrite readme, update loader

- chore: more docs

- feat: redo 'query' to 'loadQueryCached'

- fix: remove loadQueryCached

- fix: remove loadQueryCached

- fix: improve cache option logic

- chore: update readme

- chore: add prerelease channel

- chore: update prerelease

- fix: make loader options param optional
- import names and response shapes have changes

- chore: add migration details

- feat: rewrite readme, update loader

- chore: more docs

- feat: redo 'query' to 'loadQueryCached'

- fix: remove loadQueryCached

- fix: remove loadQueryCached

- fix: improve cache option logic

- chore: update readme

- chore: add prerelease channel

- chore: update prerelease

- Feat/loaders (#50) ([53ec343](https://github.com/sanity-io/hydrogen-sanity/commit/53ec343092f80aff716fc812cb099ecf021ce55e)), closes [#50](https://github.com/sanity-io/hydrogen-sanity/issues/50)
- hydrogen v4 prerelease (#49) ([07c4144](https://github.com/sanity-io/hydrogen-sanity/commit/07c4144672bff0149e2612aac6d03e40a2fefe6d)), closes [#49](https://github.com/sanity-io/hydrogen-sanity/issues/49)

### Features

- add `groq` export ([a9627f8](https://github.com/sanity-io/hydrogen-sanity/commit/a9627f82a80e88b284b8eb0e12287dfc6543957e))
- add debug to loader ([2113f12](https://github.com/sanity-io/hydrogen-sanity/commit/2113f127bf2c9f78c07be87f4030ed71b8557f12))
- add package export for preview route ([1097c03](https://github.com/sanity-io/hydrogen-sanity/commit/1097c038d4e0deee6f08d1fa46096d828e77cbcf))
- adjust preview mode ([891a3c5](https://github.com/sanity-io/hydrogen-sanity/commit/891a3c502bc5fc97d706de42e1e0ccac7839251d))
- export visual editing component ([c708c71](https://github.com/sanity-io/hydrogen-sanity/commit/c708c7193376cf220a00644c47d798f41b7bef55))
- pass client to loader ([23c0487](https://github.com/sanity-io/hydrogen-sanity/commit/23c0487c228b8f7ac43a1207ee8c0fad80c992c2))
- use `withCache` ([b874176](https://github.com/sanity-io/hydrogen-sanity/commit/b874176e35df0af35b9af9da1ccda8f1cf283099))
- use projectId from client config ([612abf0](https://github.com/sanity-io/hydrogen-sanity/commit/612abf07be3bd999c9a0150974d02f188d3de9dc))

### Bug Fixes

- adjust preview route ([848b16e](https://github.com/sanity-io/hydrogen-sanity/commit/848b16ecf7da29d687da9aef7a225168fb88b420))
- adjust types ([abbec6f](https://github.com/sanity-io/hydrogen-sanity/commit/abbec6fc24f55bf79de4befd4f58f2cade094d75))
- don't rely on environment variable naming for route ([1b5746f](https://github.com/sanity-io/hydrogen-sanity/commit/1b5746f0ebf153691773f015a9903be390573980))
- log uncached subrequests ([059d9b5](https://github.com/sanity-io/hydrogen-sanity/commit/059d9b5160d02b4dae529186bbc2e3cee167dd5c))
- return client untouched and use preview client for preview loader ([b3db374](https://github.com/sanity-io/hydrogen-sanity/commit/b3db374a608e83893d406adb311e3c07e25ce323))
- update dependencies `@sanity/client`, `@sanity/react-loader`, and `@sanity/visual-editing` ([7f25dee](https://github.com/sanity-io/hydrogen-sanity/commit/7f25dee57e1c4bb9f2bedc3bea2db356f6b064d5))
- upgrade dependencies ([c7af2a1](https://github.com/sanity-io/hydrogen-sanity/commit/c7af2a13f5c57fca7788e7b876cf2d41356317d7))

## [4.0.0-beta.5](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.0-beta.4...v4.0.0-beta.5) (2024-05-07)

### âš  BREAKING CHANGES

- pass client to loader
- adjust preview mode

### Features

- add `groq` export ([a9627f8](https://github.com/sanity-io/hydrogen-sanity/commit/a9627f82a80e88b284b8eb0e12287dfc6543957e))
- add debug to loader ([2113f12](https://github.com/sanity-io/hydrogen-sanity/commit/2113f127bf2c9f78c07be87f4030ed71b8557f12))
- adjust preview mode ([891a3c5](https://github.com/sanity-io/hydrogen-sanity/commit/891a3c502bc5fc97d706de42e1e0ccac7839251d))
- export visual editing component ([c708c71](https://github.com/sanity-io/hydrogen-sanity/commit/c708c7193376cf220a00644c47d798f41b7bef55))
- pass client to loader ([23c0487](https://github.com/sanity-io/hydrogen-sanity/commit/23c0487c228b8f7ac43a1207ee8c0fad80c992c2))
- use `withCache` ([b874176](https://github.com/sanity-io/hydrogen-sanity/commit/b874176e35df0af35b9af9da1ccda8f1cf283099))
- use projectId from client config ([612abf0](https://github.com/sanity-io/hydrogen-sanity/commit/612abf07be3bd999c9a0150974d02f188d3de9dc))

### Bug Fixes

- don't rely on environment variable naming for route ([1b5746f](https://github.com/sanity-io/hydrogen-sanity/commit/1b5746f0ebf153691773f015a9903be390573980))
- log uncached subrequests ([059d9b5](https://github.com/sanity-io/hydrogen-sanity/commit/059d9b5160d02b4dae529186bbc2e3cee167dd5c))
- return client untouched and use preview client for preview loader ([b3db374](https://github.com/sanity-io/hydrogen-sanity/commit/b3db374a608e83893d406adb311e3c07e25ce323))
- upgrade dependencies ([c7af2a1](https://github.com/sanity-io/hydrogen-sanity/commit/c7af2a13f5c57fca7788e7b876cf2d41356317d7))

## [4.0.0-beta.4](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.0-beta.3...v4.0.0-beta.4) (2024-04-18)

### Bug Fixes

- update dependencies `@sanity/client`, `@sanity/react-loader`, and `@sanity/visual-editing` ([7f25dee](https://github.com/sanity-io/hydrogen-sanity/commit/7f25dee57e1c4bb9f2bedc3bea2db356f6b064d5))

## [4.0.0-beta.3](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.0-beta.2...v4.0.0-beta.3) (2024-04-08)

### Features

- add package export for preview route ([52dd585](https://github.com/sanity-io/hydrogen-sanity/commit/52dd585de54ece03629a02b33c5364a489dab7b6))

### Bug Fixes

- adjust preview route ([80a9740](https://github.com/sanity-io/hydrogen-sanity/commit/80a974009d5706ae675faabf5927a230449d2c7f))
- adjust types ([a0edc17](https://github.com/sanity-io/hydrogen-sanity/commit/a0edc1766ea1685b0b45e067c26f4fa8ba6cc001))

## [4.0.0-beta.2](https://github.com/sanity-io/hydrogen-sanity/compare/v4.0.0-beta.1...v4.0.0-beta.2) (2024-03-27)

### âš  BREAKING CHANGES

- import names and response shapes have changes

- chore: add migration details

- feat: rewrite readme, update loader

- chore: more docs

- feat: redo 'query' to 'loadQueryCached'

- fix: remove loadQueryCached

- fix: remove loadQueryCached

- fix: improve cache option logic

- chore: update readme

- chore: add prerelease channel

- chore: update prerelease

- fix: make loader options param optional

- Feat/loaders (#50) ([f380cd0](https://github.com/sanity-io/hydrogen-sanity/commit/f380cd09f32eeb47e95ef4619082d8f7ab4f52c8)), closes [#50](https://github.com/sanity-io/hydrogen-sanity/issues/50)

## [4.0.0-beta.1](https://github.com/sanity-io/hydrogen-sanity/compare/v3.3.1...v4.0.0-beta.1) (2024-03-27)

### âš  BREAKING CHANGES

- import names and response shapes have changes

- chore: add migration details

- feat: rewrite readme, update loader

- chore: more docs

- feat: redo 'query' to 'loadQueryCached'

- fix: remove loadQueryCached

- fix: remove loadQueryCached

- fix: improve cache option logic

- chore: update readme

- chore: add prerelease channel

- chore: update prerelease

- hydrogen v4 prerelease (#49) ([4f64150](https://github.com/sanity-io/hydrogen-sanity/commit/4f64150db2759cc8f097821337fdad345acb322c)), closes [#49](https://github.com/sanity-io/hydrogen-sanity/issues/49)

## [3.4.1](https://github.com/sanity-io/hydrogen-sanity/compare/v3.4.0...v3.4.1) (2024-04-18)

### Bug Fixes

- update dependencies `@sanity/client` and `@sanity/preview-kit` ([facb066](https://github.com/sanity-io/hydrogen-sanity/commit/facb0665e32240a6210b397d0c626dbd3a599ec1))

## [3.4.0](https://github.com/sanity-io/hydrogen-sanity/compare/v3.3.1...v3.4.0) (2024-04-13)

### Features

- align `engine.node` version with hydrogen ([1470b97](https://github.com/sanity-io/hydrogen-sanity/commit/1470b9768468b15609c714e683164fb0dee8b27f))
- bump hydrogen peer dependency ([275d106](https://github.com/sanity-io/hydrogen-sanity/commit/275d10662baf4bd59437895f44bc27d7baac482f))

## [3.3.1](https://github.com/sanity-io/hydrogen-sanity/compare/v3.3.0...v3.3.1) (2024-02-02)

### Bug Fixes

- **deps:** Update dependency @shopify/hydrogen to v2024 ([810c7ea](https://github.com/sanity-io/hydrogen-sanity/commit/810c7ea9abdf9424fcb1ade16a60b5723a0613ed))

## [3.3.0](https://github.com/sanity-io/hydrogen-sanity/compare/v3.2.0...v3.3.0) (2023-11-14)

### Features

- **deps:** upgrade dependencies ([#39](https://github.com/sanity-io/hydrogen-sanity/issues/39)) ([c26677c](https://github.com/sanity-io/hydrogen-sanity/commit/c26677c032f8f13c93499f2f92502f1d0e109977))

## [3.2.0](https://github.com/sanity-io/hydrogen-sanity/compare/v3.1.1...v3.2.0) (2023-11-09)

### Features

- **deps:** adjust peer dependencies ([#36](https://github.com/sanity-io/hydrogen-sanity/issues/36)) ([30f6240](https://github.com/sanity-io/hydrogen-sanity/commit/30f62401f8459c238d86cfcaf40b7431ccb89e6c))

## [3.1.1](https://github.com/sanity-io/hydrogen-sanity/compare/v3.1.0...v3.1.1) (2023-10-16)

### Bug Fixes

- correct query options application logic ([4b0275d](https://github.com/sanity-io/hydrogen-sanity/commit/4b0275d8e39e56022f8a3db44bb12cf7bd6ced18))

## [3.1.0](https://github.com/sanity-io/hydrogen-sanity/compare/v3.0.1...v3.1.0) (2023-10-13)

### Features

- accept query options ([c54abb5](https://github.com/sanity-io/hydrogen-sanity/commit/c54abb544e18d5e38dc52ac3214c5eb7efd3670f))

## [3.0.1](https://github.com/sanity-io/hydrogen-sanity/compare/v3.0.0...v3.0.1) (2023-08-02)

### Bug Fixes

- add return types ([#18](https://github.com/sanity-io/hydrogen-sanity/issues/18)) ([c68d397](https://github.com/sanity-io/hydrogen-sanity/commit/c68d397706ee420334cfdd25f4292349cfa8dde2))

## [3.0.0](https://github.com/sanity-io/hydrogen-sanity/compare/v2.0.4...v3.0.0) (2023-07-26)

### âš  BREAKING CHANGES

- upgrade hydrogen, remove beta flag (#16)

### Features

- upgrade hydrogen, remove beta flag ([#16](https://github.com/sanity-io/hydrogen-sanity/issues/16)) ([cd3794e](https://github.com/sanity-io/hydrogen-sanity/commit/cd3794e7ad330e145924110ab6f3393cc513f9f2))

## [2.0.4](https://github.com/sanity-io/hydrogen-sanity/compare/v2.0.3...v2.0.4) (2023-07-17)

### Bug Fixes

- **deps:** update preview-kit ([#15](https://github.com/sanity-io/hydrogen-sanity/issues/15)) ([6a8268c](https://github.com/sanity-io/hydrogen-sanity/commit/6a8268cab22987a580c3a09f62f6472632b23b63))

## [2.0.3](https://github.com/sanity-io/hydrogen-sanity/compare/v2.0.2...v2.0.3) (2023-07-17)

### Bug Fixes

- update client imports to use enhanced sanity client ([#14](https://github.com/sanity-io/hydrogen-sanity/issues/14)) ([8b79edb](https://github.com/sanity-io/hydrogen-sanity/commit/8b79edbe1d1bbbdeb33132eb0c51dab12fc654de))

## [2.0.2](https://github.com/sanity-io/hydrogen-sanity/compare/v2.0.1...v2.0.2) (2023-07-08)

### Bug Fixes

- **deps:** update dependencies ([c3cdd5f](https://github.com/sanity-io/hydrogen-sanity/commit/c3cdd5f60aef455999aefe4b9e46d22b9c7efd96))

## [2.0.1](https://github.com/sanity-io/hydrogen-sanity/compare/v2.0.0...v2.0.1) (2023-07-08)

### Bug Fixes

- **deps:** update non-major ([#12](https://github.com/sanity-io/hydrogen-sanity/issues/12)) ([378894d](https://github.com/sanity-io/hydrogen-sanity/commit/378894dedc72166b45b510c72c2803ecc390c328))

## [2.0.0](https://github.com/sanity-io/hydrogen-sanity/compare/v1.1.0...v2.0.0) (2023-07-05)

### âš  BREAKING CHANGES

- **preview:** migrate to `@sanity/preview-kit@2` (#8)

### Features

- **preview:** migrate to `@sanity/preview-kit@2` ([#8](https://github.com/sanity-io/hydrogen-sanity/issues/8)) ([413680b](https://github.com/sanity-io/hydrogen-sanity/commit/413680b4ac0b612a02da37baad7799f651f8ef6f))

## [1.1.0](https://github.com/sanity-io/hydrogen-sanity/compare/v1.0.1...v1.1.0) (2023-05-27)

### Features

- simplify preview rendering ([#6](https://github.com/sanity-io/hydrogen-sanity/issues/6)) ([d04cc12](https://github.com/sanity-io/hydrogen-sanity/commit/d04cc12a5c44e9701eef7b76989040387e46f1b5))

## [1.0.1](https://github.com/sanity-io/hydrogen-sanity/compare/v1.0.0...v1.0.1) (2023-05-24)

### Bug Fixes

- prevent crash when no preview env vars set ([#5](https://github.com/sanity-io/hydrogen-sanity/issues/5)) ([7dade86](https://github.com/sanity-io/hydrogen-sanity/commit/7dade865d9b098b4ad7a599f28b574969951c2a6))

## 1.0.0 (2023-05-23)

### âš  BREAKING CHANGES

- creating hydrogen package

### Features

- cache queries ([de8ed11](https://github.com/sanity-io/hydrogen-sanity/commit/de8ed11cfa9d8af6592029525886ca86a75f78ad))
- create explicit configuration type ([27f2b88](https://github.com/sanity-io/hydrogen-sanity/commit/27f2b885847d6726f1231aba24205fd734d2d7b4))
- create Sanity client ([1744814](https://github.com/sanity-io/hydrogen-sanity/commit/1744814c70bfdedf2d6db53b1695371aef954ace))
- creating hydrogen package ([a679ead](https://github.com/sanity-io/hydrogen-sanity/commit/a679eadce27b70d8e3a5cb2b5582b9295bba3263))
- passing client options ([f7bfeb5](https://github.com/sanity-io/hydrogen-sanity/commit/f7bfeb5dcb78d03e689471f0029144cad7d94271))
- replace @sanity/client ([a9adcf8](https://github.com/sanity-io/hydrogen-sanity/commit/a9adcf8552b2bcff35862f233bd934c1d14dde8b))
- reverting to @sanity/client ([6f0139d](https://github.com/sanity-io/hydrogen-sanity/commit/6f0139d246b821c9d3381553de86a6db648dcfe5))
